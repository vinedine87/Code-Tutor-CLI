# Cursor Rules for Code Tutor CLI (2025-09)

## Goals
- 온라인 전용: OpenAI 기본 제공자 고정(OPENAI_API_KEY 필요)
- CommonJS + Commander.js 기반 CLI 유지, 한국어 우선 UX
- 안전: 덮어쓰기 방지/상대 경로 제한/타임아웃 준수

## Code Style
- Node >=18, CommonJS(require) 사용
- 파일명: 소문자-케밥 또는 lowerCamel 일관 유지
- 출력/오류 메시지: 한국어, 간결·행동지향
- 배너: "CODE TUTOR" ASCII 아트 + 노란 배경(chalk.bgYellow.black.bold)
- 최초 실행 설정 저장 안내 문구 비표시

## Structure
- `bin/ct.js` — 엔트리(`ct chat|quest|doctor`), `chat`은 OpenAI 고정
- `src/cli/interactive.js` — 대화 REPL(모드 선택/AI 호출/배너)
- `src/cli/quest.js` — 문제 생성/채점
- `src/cli/doctor.js` — 코드 실행/오류 수집/선택적 AI 설명
- `src/ai/provider.js` — 항상 OpenAI 클라이언트 반환
- `src/ai/openai.js` — OpenAI Chat Completions 래퍼
- `src/config/index.js` — provider=`openai` 고정, OpenAI 설정 유지
- `src/utils/fs.js` — slugify/timestamp/ensureDirSafe/writeFileSafe
- `docs/` — PRD/TRD/PROMPTS 문서

## Behavior
- Chat: 온라인 전용(OpenAI), 폴백 없음. 기본 모델은 `gpt-4o-mini`(환경변수 `CT_OPENAI_MODEL`로 재정의 가능)
- Doctor: 실행 결과/오류 수집 후 AI 설명(온라인)
- Quest: `quest new/run` 그대로 유지, 파일 쓰기는 `quests/` 하위

## README
- OS별(OPENAI_API_KEY 발급/등록) 설치/실행 순서 포함
- 온라인 전용으로 안내, 오프라인/로컬 백엔드 언급 금지

## Dependencies
- 포함: `openai`, `chalk`, `commander`, `fs-extra`, `inquirer`, `ora`
- 제외: 로컬 추론/다른 클라우드 전용 의존성(예: transformers, node-llama-cpp, Ollama, Gemini)

## Commit / PR
- Conventional Commits: feat/fix/docs/chore/refactor
- 작은 PR, 변경 범위 최소, 테스트 가능 범위 내에서만 추가

## Safety
- 파일 생성 기본 출력 경로: `lessons/`, `quests/`
- 경로 존재 시 중단(명시적 overwrite 처리 시에만 비움)
- 실행 타임아웃 지정, 네트워크 실패 시 사용자 친화적 오류
